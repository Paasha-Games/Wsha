<!DOCTYPE html>
<html lang="ku" dir="rtl" style="background-color: #0a0a0c;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0c">
    <title>Wsha - Kurdish Wordle</title>
    <style>
        :root { 
            --bg: radial-gradient(circle at top, #1a1a2e 0%, #0a0a0c 100%); 
            --tile-border: #3a3a3c; 
            --correct: #27ae60; 
            --present: #d4af37; 
            --absent: #3a3a3c; 
            --key-default: #4a4a4d;
            --ramadan-gold: #f1c40f;
        }
        
        html, body { 
            height: 100%; margin: 0; padding: 0; overflow: hidden; 
            touch-action: manipulation; background: var(--bg); color: white; 
            font-family: 'Segoe UI', Roboto, sans-serif; 
        }

        /* Animations */
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes flip { 0% { transform: rotateX(0); } 100% { transform: rotateX(360deg); } }
        .pop-anim { animation: pop 0.1s ease-in-out; }
        .flip-anim { animation: flip 0.6s ease-in-out; }

        #music-control, #info-control {
            position: fixed; top: 15px; z-index: 200;
            background: rgba(0,0,0,0.5); border: 1px solid var(--ramadan-gold);
            color: var(--ramadan-gold); border-radius: 50%; width: 35px; height: 35px;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
        }
        #music-control { left: 15px; }
        #info-control { right: 15px; font-weight: bold; font-size: 1.2rem; }

        .modal {
            display: none; position: fixed; z-index: 300; left: 0; top: 0; 
            width: 100%; height: 100%; background-color: rgba(0,0,0,0.8);
            justify-content: center; align-items: center;
        }
        .modal-content {
            background: #1a1a2e; padding: 20px; border-radius: 12px;
            width: 85%; max-width: 400px; text-align: center; border: 1px solid var(--ramadan-gold);
        }

        #main-menu {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 100;
            display: flex; flex-direction: column; align-items: center; text-align: center;
        }
        .spacer { flex-grow: 1; }
        #main-menu h1 { font-size: 5rem; color: var(--ramadan-gold); margin: 0; }
        #moon-phase { font-size: 2rem; margin-bottom: 10px; }
        .start-btn {
            background: var(--correct); color: white; border: none; 
            width: 200px; height: 80px; font-size: 1.6rem; font-weight: bold; 
            border-radius: 4px; cursor: pointer;
        }
        .tiktok-link { 
            display: inline-block; margin-top: 10px; color: var(--ramadan-gold); 
            text-decoration: none; font-weight: bold; border: 1px solid var(--ramadan-gold); 
            padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;
        }

        /* FIXED: Game container uses flex to distribute space */
        #game-container { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            height: 100vh; 
            width: 100%; 
            visibility: hidden;
            justify-content: space-between; /* This pushes elements apart */
        }
        #game-container h1 { margin-top: 20px; font-size: 2.2rem; color: var(--ramadan-gold); }

        /* Board Wrapper Fix - Shrinks if screen is small */
        #board-wrapper { 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            flex: 1; 
            width: 100%; 
            min-height: 0; /* Allows shrinking */
        }
        #game-board { display: flex; flex-direction: column; gap: 4px; align-items: center; }
        .row { display: flex; gap: 4px; justify-content: center; }
        .tile { 
            width: 12vw; height: 12vw; max-width: 48px; max-height: 48px;
            border: 2px solid var(--tile-border); display: flex; align-items: center; 
            justify-content: center; font-size: 1.4rem; font-weight: bold; 
            border-radius: 6px; background: rgba(255,255,255,0.05);
        }

        #message-container { height: 90px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #message-text { color: var(--ramadan-gold); font-weight: bold; font-size: 1rem; margin-bottom: 2px; }
        #countdown-timer { color: white; font-size: 0.85rem; }

        #share-btn {
            display: none; background: var(--ramadan-gold); color: black; border: none;
            padding: 8px 16px; border-radius: 5px; font-weight: bold; cursor: pointer; 
            margin-bottom: 5px; font-size: 0.9rem;
        }

        /* KEYBOARD: Pushed up with a safer margin for Android */
        #keyboard { 
            width: 100%; 
            max-width: 480px; 
            padding: 5px; 
            padding-bottom: 95px; /* Significant lift for Android bottom bars */
        }
        .kbd-row { display: flex; justify-content: center; gap: 3px; margin-bottom: 4px; }
        button { 
            background: var(--key-default); color: white; border: none; border-radius: 4px;
            height: 42px; font-size: 0.95rem; flex: 1;
            display: flex; align-items: center; justify-content: center;
        }
        .wide { flex: 1.8; background: #2c3e50; font-size: 0.75rem; border: 1px solid var(--ramadan-gold); }

        .game-footer { position: fixed; bottom: 0; width: 100%; background: #000; text-align: center; padding: 8px 0 12px 0; font-size: 0.8rem; border-top: 1px solid var(--ramadan-gold); z-index: 50; }
    </style>
</head>
<body>

    <audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>
    <div id="music-control" onclick="toggleMusic()">ðŸ”Š</div>
    <div id="info-control" onclick="toggleModal('info-modal')">?</div>

    <div id="info-modal" class="modal" onclick="toggleModal('info-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2 style="color:var(--ramadan-gold)">Ú†Û†Ù† ÛŒØ§Ø±ÛŒ Ø¯Û•Ú©Û•ÛŒØªØŸ</h2>
            <p>Ù„Û• Ù¦ Ù‡Û•ÙˆÚµØ¯Ø§ ÙˆØ´Û•Ú©Û• Ø¨Ø¯Û†Ø²Û•Ø±Û•ÙˆÛ•.</p>
            <div style="text-align:right; font-size: 0.9rem;">
                <p>âœ… <b>Ø³Û•ÙˆØ²:</b> Ù¾ÛŒØªÛ•Ú©Û• Ù„Û• Ø´ÙˆÛŽÙ†ÛŒ Ø®Û†ÛŒÛ•ØªÛŒ.</p>
                <p>ðŸŸ¨ <b>Ø²Û•Ø±Ø¯:</b> Ù¾ÛŒØªÛ•Ú©Û• Ù„Û• ÙˆØ´Û•Ú©Û•Ø¯Ø§ Ù‡Û•ÛŒÛ• Ø¨Û•ÚµØ§Ù… Ø´ÙˆÛŽÙ†Û•Ú©Û•ÛŒ Ù‡Û•ÚµÛ•ÛŒÛ•.</p>
                <p>â¬› <b>Ø®Û†ÚµÛ•Ù…ÛŽØ´ÛŒ:</b> Ù¾ÛŒØªÛ•Ú©Û• Ù„Û• ÙˆØ´Û•Ú©Û•Ø¯Ø§ Ù†ÛŒÛŒÛ•.</p>
            </div>
            <button class="start-btn" style="height:50px; width:100px; font-size:1rem;" onclick="toggleModal('info-modal')">Ø¨Ø§Ø´Û•</button>
        </div>
    </div>

    <div id="main-menu">
        <div class="spacer"></div>
        <div id="moon-phase">ðŸŒ™</div>
        <h1>ÙˆØ´Û•</h1>
        <p>Ø¨Û•Ø®ÛŽØ±Ø¨ÛŽÛŒØª Ø¨Û† ÛŒØ§Ø±ÛŒ ÙˆØ´Û•</p>
        <p id="streak-display" style="color:var(--correct); font-size:1rem;"></p>
        <div class="spacer"></div>
        <button class="start-btn" onclick="startGame()">Ø¯Û•Ø³ØªÙ¾ÛŽÚ©Ø±Ø¯Ù†</button>
        <div class="spacer"></div>
        <div style="margin-bottom: 30px;">
            <div style="font-size: 0.9rem; color: #ccc;">Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø§ÙˆÛ• Ù„Û•Ù„Ø§ÛŒÛ•Ù† <span style="color:var(--ramadan-gold); font-weight:bold;">Paasha</span></div>
            <a href="https://www.tiktok.com/@Pasha_Games" class="tiktok-link">TikTok: @Pasha_Games</a>
        </div>
    </div>

    <div id="game-container">
        <h1>ÙˆØ´Û•</h1>
        <div id="board-wrapper">
            <div id="game-board"></div>
        </div>
        <div id="message-container">
            <button id="share-btn" onclick="shareScore()">Ø¦Û•Ù†Ø¬Ø§Ù…Û•Ú©Ø§Ù† Ø¨ÚµØ§ÙˆØ¨Ú©Û•Ø±Û•ÙˆÛ• ðŸ“‹</button>
            <div id="message-text"></div>
            <div id="countdown-timer"></div>
        </div>
        <div id="keyboard"></div>
        <div class="game-footer">Ù„Û• Ù„Ø§ÛŒÛ•Ù† <span style="color:var(--ramadan-gold)">Paasha</span> Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø§ÙˆÛ•</div>
    </div>

<script>
    const wordList = ["Ø¨Û•Ù‡Ø§Ø±", "Ø¨Ø§Ø±Ø§Ù†", "Ø¯ÛŒÙˆØ§Ø±", "Ù‡Û•ÙˆØ§Úµ", "Ú©Û†ÚµØ§Ù†", "Ø´ÛŒØ±ÛŒÙ†", "Ù…ÛŽÚ˜ÙˆÙˆ", "Ù¾Ø§ÛŒÛŒØ²", "Ù‚Û•ÚµÛ•Ù…", "Ù‡ÛŽÙˆØ§Ø´", "Ú¯Û•ÙˆØ±Û•", "Ú•Û†Ú˜Ø§Ù†", "Ø´Û•ÙˆØ§Ù†", "Ø¦Ø§Ø³Ø§Ù†", "Ú©Û•Ù…Ø§Ù†", "Ù¾ÛŽÚµØ§Ùˆ", "Ù¾Û•Ù†Ø¬Û•", "Ø¬Ø§Ù†ØªØ§", "Ù‡ÛŽÙ„Ú©Û•", "Ø¯Û•Ø±Ú¯Ø§", "Ø¨Ø§Ø®Ú†Û•", "Ù‡Û•Ù†Ø§Ø±", "Ú©Û•ÙˆÚ†Ú©", "Ø´Û†Ø±Ø¨Ø§", "Ù‡Û•ÙˆÛŒØ±"]; 
    
    const startDate = new Date("2026-02-25").getTime();
    const today = new Date().setHours(0,0,0,0);
    const dayIndex = Math.floor((today - startDate) / (1000 * 60 * 60 * 24)) + 1;
    const answer = wordList[(dayIndex - 1) % wordList.length];
    
    let row = 0, col = 0, currentGuess = "", gameOver = false;
    let boardState = [];
    const audio = document.getElementById('bg-music');

    const board = document.getElementById('game-board');
    for(let r=0; r<6; r++){
        let rowDiv = document.createElement('div'); rowDiv.className = 'row';
        for(let c=0; c<5; c++){
            let tile = document.createElement('div'); tile.className = 'tile'; tile.id = `t-${r}-${c}`;
            rowDiv.appendChild(tile);
        }
        board.appendChild(rowDiv);
    }

    const keys = [['Ù¾','Û†','Ø­','Ø¦','ÛŒ','Øª','Ø±','Û•','Ùˆ','Ù‚','Úµ'],['Ú•','Ú©','Ù‡','Ú¯','Ù','Ø¯','Ø³','Ø§','Ø¨','Ù„','Ø´'],['ENTER','Ù†','Ù…','Ú¤','Ú†','Ø¬','Ø®','Ø²','Ú˜','ÛŽ','Ø³Ú•ÛŒÙ†Û•ÙˆÛ•']];
    const kbd = document.getElementById('keyboard');
    keys.forEach(r => {
        let rowDiv = document.createElement('div'); rowDiv.className = 'kbd-row';
        r.forEach(k => {
            let btn = document.createElement('button'); btn.innerText = (k === 'Ù‡') ? 'Ù‡Ù€' : k;
            if(k === 'ENTER' || k === 'Ø³Ú•ÛŒÙ†Û•ÙˆÛ•') btn.className = 'wide';
            btn.onclick = () => { if(k === 'ENTER') submit(); else if(k === 'Ø³Ú•ÛŒÙ†Û•ÙˆÛ•') del(); else press(k); };
            btn.id = `key-${k}`; rowDiv.appendChild(btn);
        });
        kbd.appendChild(rowDiv);
    });

    const moons = ['ðŸŒ‘','ðŸŒ’','ðŸŒ“','ðŸŒ”','ðŸŒ•','ðŸŒ–','ðŸŒ—','ðŸŒ˜'];
    document.getElementById('moon-phase').innerText = moons[(dayIndex - 1) % 8];
    let streak = localStorage.getItem('wsha_streak') || 0;
    if(streak > 0) document.getElementById('streak-display').innerText = `Ø²Ù†Ø¬ÛŒØ±Û•ÛŒ Ø¨Ø±Ø¯Ù†Û•ÙˆÛ•: ${streak} Ú•Û†Ú˜ ðŸ”¥`;

    function toggleMusic() {
        if (audio.paused) { audio.play(); document.getElementById('music-control').innerText = "ðŸ”Š"; } 
        else { audio.pause(); document.getElementById('music-control').innerText = "ðŸ”‡"; }
    }

    function toggleModal(id) {
        const m = document.getElementById(id);
        m.style.display = (m.style.display === 'flex') ? 'none' : 'flex';
    }

    function startGame() {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('game-container').style.visibility = 'visible';
        audio.play().catch(() => {});
        if (localStorage.getItem('lastPlayedDate') == today) { 
            gameOver = true; 
            document.getElementById('message-text').innerText = "Ø¨Û† ÙˆØ´Û•ÛŒ Ù†ÙˆÛŽ Ú†Ø§ÙˆÛ•Ú•ÛŽ Ø¨Ú©Û•:"; 
            startCountdown();
        }
    }

    function press(l) { 
        if (!gameOver && col < 5) { 
            let t = document.getElementById(`t-${row}-${col}`);
            t.innerText = l; t.classList.add('pop-anim');
            setTimeout(() => t.classList.remove('pop-anim'), 100);
            currentGuess += l; col++; 
        } 
    }

    function del() { if (!gameOver && col > 0) { col--; currentGuess = currentGuess.slice(0, -1); document.getElementById(`t-${row}-${col}`).innerText = ""; } }

    function submit() {
        if (!gameOver && col === 5) {
            for (let i = 0; i < 5; i++) {
                let tile = document.getElementById(`t-${row}-${i}`);
                let char = currentGuess[i];
                setTimeout(() => {
                    tile.classList.add('flip-anim');
                    if (char === answer[i]) { tile.style.background = "var(--correct)"; updateKey(char, "var(--correct)"); }
                    else if (answer.includes(char)) { tile.style.background = "var(--present)"; updateKey(char, "var(--present)"); }
                    else { tile.style.background = "var(--absent)"; updateKey(char, "var(--absent)"); }
                    tile.style.border = "none";
                }, i * 100);
            }
            boardState.push(currentGuess);
            if (currentGuess === answer) { streak++; localStorage.setItem('wsha_streak', streak); document.getElementById('message-text').innerText = "Ù¾ÛŒØ±Û†Ø²Û•! ðŸ†"; finish(); }
            else { row++; col = 0; currentGuess = ""; if (row === 6) { localStorage.setItem('wsha_streak', 0); document.getElementById('message-text').innerText = "ÙˆØ´Û•Ú©Û•: " + answer; finish(); } }
        }
    }

    function updateKey(letter, color) {
        let key = document.getElementById(`key-${letter}`);
        if (!key || key.style.background === 'rgb(39, 174, 96)') return; 
        key.style.background = color;
    }

    function finish() { 
        gameOver = true; 
        localStorage.setItem('lastPlayedDate', today); 
        localStorage.setItem('lastBoard', JSON.stringify(boardState));
        setTimeout(() => {
            startCountdown();
            document.getElementById('share-btn').style.display = "block";
        }, 1500); 
    }

    function startCountdown() {
        const timerElement = document.getElementById('countdown-timer');
        timerElement.style.display = 'block';
        function updateTimer() {
            const now = new Date(); const tomorrow = new Date(); tomorrow.setHours(24, 0, 0, 0);
            const diff = tomorrow - now;
            const h = Math.floor(diff / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);
            timerElement.innerText = `${h} Ú©Ø§ØªÚ˜Ù…ÛŽØ± Ùˆ ${m} Ø®ÙˆÙ„Û•Ú© Ùˆ ${s} Ú†Ø±Ú©Û•`;
            if (diff <= 0) { location.reload(); }
        }
        setInterval(updateTimer, 1000); updateTimer();
    }

    function shareScore() {
        let emojiMap = "";
        let finalBoard = JSON.parse(localStorage.getItem('lastBoard')) || boardState;
        finalBoard.forEach(g => {
            for(let i=0; i<5; i++){
                if(g[i] === answer[i]) emojiMap += "ðŸŸ©";
                else if(answer.includes(g[i])) emojiMap += "ðŸŸ¨";
                else emojiMap += "â¬›";
            }
            emojiMap += "\n";
        });
        const text = `ÙˆØ´Û• - Wsha\nÚ•Û†Ú˜ÛŒ ${dayIndex}\n${emojiMap}\n@Pasha_Games`;
        navigator.clipboard.writeText(text);
        alert("Ø¦Û•Ù†Ø¬Ø§Ù…Û•Ú©Û• Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§! Ø¦ÛŽØ³ØªØ§ Ø¯Û•ØªÙˆØ§Ù†ÛŒ Ø¨ÚµØ§ÙˆÛŒ Ø¨Ú©Û•ÛŒØªÛ•ÙˆÛ•.");
    }
</script>
</body>
</html>
